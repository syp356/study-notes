## 数组

#### 概念

数组（Array）是一种<b>线性表</b>数据结构。它用一组<b>连续的内存空间</b>，来存储一组具有<b>相同类型</b>的数据

#### 特性

<b>线性表</b>：线性表就是数据排成像一条线一样的结构，数据之间的关系只有前后，如链表，栈，队列。与它相对的概念是非线性表，如图，树，堆等，数据之间关系有多个维度。

<b>连续的内存空间和相同的数据类型</b>：如图一内存分配示意图所示，这两个特性是按下标随机访问的基础。使用int a = new int[10] 时，计算机会给这个数组分配一块儿连续的内存空间，假如是1000-1039，内存首地址是1000，因为数组元素相同，而且jvm规定了每种数据类型所占空间的大小，见图二，那么当要访问第i个数据时，计算机就会根据寻址公式 计算出对应的内存地址

```
一维数组内存寻址：
a[i]_address = base_address + i * data_type_size

二维数组内存寻址：
对于 m * n 的数组，a [ i ][ j ] (i < m,j < n)的地址为：
address = base_address + ( i * n + j) * type_size
```



图一内存分配示意图

![image-20200826114249563](C:\Users\SYP\AppData\Roaming\Typora\typora-user-images\image-20200826114249563.png)

连续的数组空间在提供随机访问特性的同时，也给增加和删除数据带来了一定的性能开销。如果我们要在第i位插入一条数据，第i位及以后的所有数据都要往后移动。如果要删除第i位的数据，为了保证空间连续性，第i位之后的数据都要向前移动。这里有个小技巧：如果不需要保证数据的顺序性，删除第i位后，可以将最后一位元素放到第i的位置。

另外为了减少删除元素时其他元素搬移的次数，我们可以先给被删除的元素做个删除标记，并不真正删除，当空间不够的时候再触发真正的删除操作。这也是JVM<b>标记清理垃圾回收算法</b>的核心思想



#### java中数组的应用：

String:  底层是一个字符数组   ```private final char value[];```

HashMap: 底层是一个数组加+链表/红黑树   ```transient Node<K,V>[] table;```

ArrayList: 底层是一个数组  ```transient Object[] elementData;```



图二：java中八种基本数据类型所占空间大小

![image-20200826115922597](C:\Users\SYP\AppData\Roaming\Typora\typora-user-images\image-20200826115922597.png)